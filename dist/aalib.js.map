{"version":3,"file":"aalib.js","mappings":"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","sources":["webpack://aalib/webpack/universalModuleDefinition","webpack://aalib/./src/aa.js","webpack://aalib/./src/aafont.js","webpack://aalib/./src/core/AAImage.js","webpack://aalib/./src/core/monoProcessor.js","webpack://aalib/./src/core/rgbProcessor.js","webpack://aalib/./src/filters/brightness.js","webpack://aalib/./src/filters/contrast.js","webpack://aalib/./src/filters/desaturate.js","webpack://aalib/./src/filters/inverse.js","webpack://aalib/./src/filters/linear.js","webpack://aalib/./src/readers/AbstractReader.js","webpack://aalib/./src/readers/ImageDataReader.js","webpack://aalib/./src/readers/ImageReader.js","webpack://aalib/./src/readers/VideoReader.js","webpack://aalib/./src/renderers/BaseRenderer.js","webpack://aalib/./src/renderers/CanvasRenderer.js","webpack://aalib/./src/renderers/HTMLRenderer.js","webpack://aalib/./src/utils.js","webpack://aalib/./node_modules/rxjs/Observable.js","webpack://aalib/./node_modules/rxjs/Observer.js","webpack://aalib/./node_modules/rxjs/Subscriber.js","webpack://aalib/./node_modules/rxjs/Subscription.js","webpack://aalib/./node_modules/rxjs/add/operator/do.js","webpack://aalib/./node_modules/rxjs/add/operator/map.js","webpack://aalib/./node_modules/rxjs/operator/do.js","webpack://aalib/./node_modules/rxjs/operator/map.js","webpack://aalib/./node_modules/rxjs/symbol/observable.js","webpack://aalib/./node_modules/rxjs/symbol/rxSubscriber.js","webpack://aalib/./node_modules/rxjs/util/UnsubscriptionError.js","webpack://aalib/./node_modules/rxjs/util/errorObject.js","webpack://aalib/./node_modules/rxjs/util/isArray.js","webpack://aalib/./node_modules/rxjs/util/isFunction.js","webpack://aalib/./node_modules/rxjs/util/isObject.js","webpack://aalib/./node_modules/rxjs/util/root.js","webpack://aalib/./node_modules/rxjs/util/toSubscriber.js","webpack://aalib/./node_modules/rxjs/util/tryCatch.js","webpack://aalib/webpack/bootstrap","webpack://aalib/webpack/runtime/global","webpack://aalib/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"aalib\"] = factory();\n\telse\n\t\troot[\"aalib\"] = factory();\n})(self, function() {\nreturn ","import AAImage from \"./core/AAImage\";\nimport monoProcessor from \"./core/monoProcessor\";\nimport rgbProcessor from \"./core/rgbProcessor\";\nimport { mapRange } from \"./utils\";\n\nexport default function factory(options) {\n    return (image) => aa(image, options);\n}\n\nexport function aa(image, options) {\n    const { width, height, colored = false } = options;\n\n    const bw = image.width / width;\n    const bh = image.height / height;\n\n    let minMono = 255;\n    let maxMono = 0;\n\n    const data = new Array(width * height);\n    let k = 0;\n\n    for (let i = 0; i < height; i++) {\n        for (let j = 0; j < width; j++) {\n\n            const color = analyzeColors(\n                image,\n                ~~(j * bw),\n                ~~(i * bh),\n                bw,\n                bh\n            );\n\n            if (color.mono > maxMono) {\n                maxMono = color.mono;\n            }\n            if (color.mono < minMono) {\n                minMono = color.mono;\n            }\n\n            data[k++] = color;\n        }\n    }\n\n    const aaImage = new AAImage({\n        width,\n        height,\n        data,\n        colorProcessor: monoProcessor,\n        meta: { colored }\n    });\n    \n    normalizeGrayscale(aaImage, minMono, maxMono);\n\n    return aaImage;\n}\n\nfunction analyzeColors(image, x, y, width, height) {\n    const avgColor = { r: 0, g: 0, b: 0 };\n    let count = 0;\n\n    for (let row = 0; row < height; row++) {\n        for (let col = 0; col < width; col++) {\n            rgbProcessor.addc(avgColor, image.getAt(x + col, y + row));\n            count++;\n        }\n    }\n\n    rgbProcessor.div(avgColor, count);\n\n    return {\n        r: avgColor.r,\n        g: avgColor.g,\n        b: avgColor.b,\n        mono: rgbProcessor.getGrayscale(avgColor)\n    };\n}\n\nfunction normalizeGrayscale(img, a, b) {\n    img.process((color) => {\n        color.mono = ~~mapRange(color.mono, a, b, 0, 255);\n    });\n}","import { mapRange } from \"./utils\";\n\nexport default function aafont(charset, options) {\n    const table = new Array(charset.length);\n    let min = 255;\n    let max = 0;\n\n    for (let i = 0; i < charset.length; i++) {\n        const char = charset[i];\n        const brightness = calculateBrightness(char, options);\n\n        if (brightness < min) {\n            min = brightness;\n        }\n        if (brightness > max) {\n            max = brightness;\n        }\n\n        table[i] = { char, brightness };\n    }\n\n    return table\n        .map(({ char, brightness }) => ({ char, brightness: ~~mapRange(brightness, min, max, 0, 255) }))\n        .sort((a, b) => {\n            if (a.brightness < b.brightness) return -1;\n            if (a.brightness > b.brightness) return 1;\n            return 0;\n        });\n}\n\nfunction calculateBrightness(char, options) {\n    const canvas = drawChar(char, options);\n    const ctx = canvas.getContext(\"2d\");\n    const idata = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    const data32 = new Uint32Array(idata.data.buffer);\n\n    let brightness = 0;\n    let r, g, b, pixel32;\n\n    for (var i = 0; i < data32.length; ++i) {\n        pixel32 = data32[i];\n\n        r = pixel32 & 0xff;\n        g = (pixel32 >> 8) & 0xff;\n        b = (pixel32 >> 16) & 0xff;\n\n        brightness += (r + g + b) / 3;\n    }\n\n    brightness /= canvas.width * canvas.height;\n\n    return brightness;\n}\n\nfunction drawChar(char, { fontFamily = \"monospace\" } = {}) {\n    const { canvas, ctx } = createCanvas();\n\n    ctx.fillStyle = \"#fff\";\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    ctx.fillStyle = \"#000\";\n    ctx.textBaseline = \"top\";\n    ctx.textAlign = \"left\";\n    ctx.font = \"20px \" + fontFamily;\n\n    ctx.fillText(char, 0, 0);\n\n    return canvas;\n}\n\nconst createCanvas = once(() => {\n    const canvas = document.createElement(\"canvas\");\n    const ctx = canvas.getContext(\"2d\", { alpha: false });\n\n    canvas.width = 15;\n    canvas.height = 25;\n\n    return { canvas, ctx };\n});\n\nfunction once(func) {\n    func._result = null;\n    return () => func._result || (func._result = func());\n}","import rgbProcessor from \"./rgbProcessor\";\n\nexport default class AAImage {\n\n    constructor({ width, height, colorProcessor, data = [], meta = {} } = {}) {\n        this.width = width;\n        this.height = height;\n        this.data = data;\n        this.meta = meta;\n        this.colorProcessor = colorProcessor;\n    }\n\n    getAt(x, y) {\n        return this.data[x + this.width * y];\n    }\n\n    process(fn) {\n        this.data.forEach(pt => {\n            fn(pt, this.colorProcessor);\n        });\n\n        return this;\n    }\n\n    toImageData() {\n        const data = [];\n        let color;\n\n        for (let i = 0; i < this.data.length; i++) {\n            color = this.data[i];\n\n            data[data.length] = color.r;\n            data[data.length] = color.g;\n            data[data.length] = color.b;\n            data[data.length] = 255;\n        }\n\n        return new ImageData(\n            new Uint8ClampedArray(data),\n            this.width,\n            this.height\n        );\n    }\n\n    static fromImageData(idata) {\n        const data32 = new Uint32Array(idata.data.buffer);\n        const length = data32.length;\n        const data = new Array(length);\n\n        let pixel32;\n\n        for(var i = 0;i < length; ++i) {\n            pixel32 = data32[i];\n\n            data[i] = {\n                r: pixel32 & 0xff,\n                g: (pixel32 >> 8) & 0xff,\n                b: (pixel32 >> 16) & 0xff\n            };\n        }\n\n        return new AAImage({\n            data,\n            width: idata.width,\n            height: idata.height,\n            colorProcessor: rgbProcessor\n        });\n    }\n\n    static fromHTMLImageElement(image) {\n        const canvas = document.createElement(\"canvas\");\n        const ctx = canvas.getContext(\"2d\");\n        const { naturalWidth, naturalHeight } = image;\n\n        canvas.width = naturalWidth;\n        canvas.height = naturalHeight;\n        ctx.drawImage(image, 0, 0);\n\n        return AAImage.fromImageData(\n            ctx.getImageData(0, 0, naturalWidth, naturalHeight)\n        );\n    }\n}","import { clampByte } from \"../utils\";\n\nexport default {\n    mul(color, v) {\n        color.mono = ~~(color.mono * v);\n        return this;\n    },\n\n    add(color, v) {\n        color.mono += v;\n        return this;\n    },\n\n    div(color, v) {\n        this.mul(color, 1.0 / v);\n    },\n\n    inverse(color) {\n        color.mono = 255 - color.mono;\n        return this;\n    },\n\n    desaturate(color) {\n        color.r = color.g = color.b = color.mono;\n        return color;\n    },\n\n    clamp(color) {\n        color.mono = clampByte(color.mono);\n        return this;\n    }\n};","import { clampByte } from \"../utils\";\n\nexport default {\n    mul(color, v) {\n        color.r = ~~(color.r * v);\n        color.g = ~~(color.g * v);\n        color.b = ~~(color.b * v);\n\n        return this;\n    },\n\n    add(color, v) {\n        color.r += v;\n        color.g += v;\n        color.b += v;\n\n        return this;\n    },\n\n    addc(color, { r, g, b }) {\n        color.r += r;\n        color.g += g;\n        color.b += b;\n\n        return this;\n    },\n\n    div(color, v) {\n        return this.mul(color, 1.0 / v);\n    },\n\n    inverse(color) {\n        color.r = 255 - color.r;\n        color.g = 255 - color.g;\n        color.b = 255 - color.b;\n\n        return this;\n    },\n\n    getGrayscale(color) {\n        return ~~((color.r + color.g + color.b) / 3);\n    },\n\n    desaturate(color) {\n        color.r = color.g = color.b = this.getGrayscale(color);\n\n        return this;\n    },\n\n    clamp(color) {\n        color.r = clampByte(color.r);\n        color.g = clampByte(color.g);\n        color.b = clampByte(color.b);\n\n        return this;\n    }\n};\n","import linear from \"./linear\";\n\nexport default function factory(val) {\n    return function (image) {\n        return brightness(image, val);\n    };\n}\n\nexport function brightness(image, val) {\n    return linear(1, val || 0)(image);\n}\n","import { linearTransformation } from \"./linear\";\n\nexport default function factory(val) {\n    return image => contrast(image, val);\n}\n\nexport function contrast(image, val = 1) {\n    return linearTransformation(image, val, 0);\n}\n","export default function factory() {\n    return image => desaturate(image);\n}\n\nexport function desaturate(image) {\n    return image.process((color, processor) => {\n        processor.desaturate(color);\n    });\n}\n","export default function factory() {\n    return image => inverse(image);\n}\n\nexport function inverse(image) {\n    return image.process((color, processor) => {\n        processor.inverse(color).clamp(color);\n    });\n}\n","export default function factory(alpha, beta) {\n    return image => linearTransformation(image, alpha, beta);\n}\n\nexport function linearTransformation(image, alpha, beta) {\n    return image.process((color, processor) => {\n        processor.mul(color, alpha).add(color, beta).clamp(color);\n    });\n}\n","import { Observable } from \"rxjs/Observable\";\nimport \"rxjs/add/operator/map\";\nimport \"rxjs/add/operator/do\";\n\nexport default class AbstractReader {\n    read() {\n        return Observable.create(observer => {\n            this.onRead(observer);\n            return this.onDispose.bind(this);\n        });\n    }\n\n    onRead() {\n        // override\n    }\n\n    onDispose() {\n        // override\n    }\n}","import AbstractReader from \"./AbstractReader\";\nimport AAImage from \"../core/AAImage\";\n\nexport default class ImageDataReader extends AbstractReader {\n\n    constructor(idata) {\n        super();\n        this.idata = idata;\n    }\n\n    onRead(observer) {\n        observer.next(AAImage.fromImageData(this.idata));\n        observer.complete();\n    }\n\n    static fromImageData(idata) {\n        const reader = new ImageDataReader(idata);\n        return reader.read();\n    }\n\n    static fromCanvas(canvas, x, y, width, height) {\n        const ctx = canvas.getContext(\"2d\");\n        const idata = ctx.getImageData(\n            x || 0,\n            y || 0,\n            width || canvas.width,\n            height || canvas.height\n        );\n\n        return ImageDataReader.fromImageData(idata);\n    }\n}\n","import AbstractReader from \"./AbstractReader\";\nimport AAImage from \"../core/AAImage\";\n\nexport default class ImageReader extends AbstractReader {\n\n    constructor(url) {\n        super();\n        this.url = url;\n    }\n\n    onRead(observer) {\n        const img = document.createElement(\"img\");\n        img.crossOrigin = \"Anonymous\";\n\n        const onLoad = () => {\n            removeListeners();\n            observer.next(AAImage.fromHTMLImageElement(img));\n            observer.complete();\n        };\n\n        const onError = (e) => {\n            removeListeners();\n            observer.error(e);\n        };\n\n        const removeListeners = () => {\n            img.removeEventListener(\"load\", onLoad);\n            img.removeEventListener(\"error\", onError);\n        };\n\n        img.addEventListener(\"load\", onLoad);\n        img.addEventListener(\"error\", onError);\n\n        if (img.complete && img.naturalWidth) {\n            onLoad();\n        } else if (this.url) {\n            img.src = this.url;\n        }\n    }\n\n    static fromURL(url) {\n        const reader = new ImageReader(url);\n        return reader.read();\n    }\n\n    static fromHTMLImage(img) {\n        return ImageReader.fromURL(img.src);\n    }\n}\n","import AbstractReader from \"./AbstractReader\";\nimport AAImage from \"../core/AAImage\";\n\nexport default class VideoReader extends AbstractReader {\n\n    \n\n    constructor(video, captureFrame, options) {\n        super();\n\n        this.video = video;\n        this.options = Object.assign({}, { autoplay: false }, options);\n        this.video.autoplay = this.options.autoplay;\n        this.captureFrame = captureFrame;\n        \n        this.options._lastDisplayedTimestamp = 0;\n\n        if (!options.framerate) {\n            this.options.framerate = 12\n        } else {\n            this.options.framerate = options.framerate\n        }\n\n        console.log(`framerate is ${this.options.framerate}`)\n    }\n\n    onRead(observer) {\n        const video = this.video;\n\n        this.playbackLoop = (timestamp) => {\n            if (video.paused || video.ended) {\n                return;\n            }\n\n            if (this.options._lastDisplayedTimestamp + 1000/this.options.framerate <= timestamp) {\n                observer.next(AAImage.fromImageData(this.captureFrame(video)));\n            }\n            requestAnimationFrame(this.playbackLoop);\n        };\n\n        this.onError = () => {\n            const { src, error: { code, message } } = video;\n\n            video.removeEventListener(\"play\", this.playbackLoop);\n            observer.error(`Error occurred while trying to play ${ src }: : ${ code }, ${ message }`);\n        };\n\n        video.addEventListener(\"error\", this.onError);\n        video.addEventListener(\"play\", this.playbackLoop);\n    }\n\n    onDispose() {\n        this.video.removeEventListener(\"play\", this.playbackLoop);\n        this.video.removeEventListener(\"error\", this.onError);\n    }\n\n    static fromVideoElement(video, options) {\n        const reader = new VideoReader(video, createVideoCapture(), options);\n        return reader.read();\n    }\n}\n\nfunction createVideoCapture() {\n    const canvas = document.createElement(\"canvas\");\n    const ctx = canvas.getContext(\"2d\");\n\n    return function capture(video) {\n        const w = video.videoWidth;\n        const h = video.videoHeight;\n\n        canvas.width = w;\n        canvas.height = h;\n\n        ctx.drawImage(video, 0, 0, w, h);\n\n        return ctx.getImageData(0, 0, w, h);\n    };\n}\n","import { range } from \"../utils\";\nimport aafont from \"../aafont\";\n\nexport default class BaseRenderer {\n    constructor(options) {\n        this.options = Object.assign({}, {\n            charset: ASCII_CHARSET,\n            fontFamily: \"monospace\"\n        }, options);\n\n        this.fontmap = BaseRenderer.buildFont(this.options.charset, {\n            fontFamily: this.options.fontFamily\n        });\n\n        this.matchChar = memoize(this.matchChar.bind(this));\n    }\n\n    render(image) {\n        return this.processImage(image);\n    }\n\n    processImage(image) {\n        let pixel;\n\n        for(var i = 0; i < image.data.length; ++i) {\n            pixel = image.data[i];\n            pixel.char = this.matchChar(pixel.mono);\n        }\n\n        return image;\n    }\n\n    matchChar(monoValue) {\n        let match = { brightness: -1 };\n\n        for (let i = 0; i < this.fontmap.length; i++) {\n            const tuple = this.fontmap[i];\n\n            if (Math.abs(monoValue - tuple.brightness) <= Math.abs(monoValue - match.brightness)) {\n                match = tuple;\n            } else {\n                return match.char;\n            }\n        }\n\n        return match.char;\n    }\n\n    static buildFont(charset, options) {\n        return aafont(charset, options);\n    }\n}\n\nexport const ASCII_CHARSET = range(32, 126).map(code => String.fromCharCode(code));\nexport const SIMPLE_CHARSET = [\".\", \":\", \"*\", \"I\", \"$\", \"V\", \"F\", \"N\", \"M\"];\n\nfunction memoize(func) {\n    func._cache = [];\n    return (arg) => func._cache[arg] || (func._cache[arg] = func(arg));\n}","import BaseRenderer from \"./BaseRenderer\";\n\nexport { ASCII_CHARSET, SIMPLE_CHARSET } from \"./BaseRenderer\";\n\nexport default function factory(options) {\n    const renderer = new CanvasRenderer(options);\n    return image => renderer.render(image);\n}\n\nexport class CanvasRenderer extends BaseRenderer {\n\n    constructor(options) {\n        super(Object.assign({}, {\n            fontSize: 7,\n            lineHeight: 7,\n            charWidth: 4.2,\n            width: 400,\n            height: 300,\n            background: \"#fff\",\n            color: \"#000\"\n        }, options));\n\n        this.el = this.options.el || document.createElement(\"canvas\");\n        this.el.width = this.options.width;\n        this.el.height = this.options.height;\n        this.el.style.backgroundColor = this.options.background;\n\n        this.ctx = this.el.getContext(\"2d\");\n        this.ctx.textBaseline = \"top\";\n        this.ctx.textAlign = \"start\";\n        this.ctx.font = this.options.fontSize + \"px \" + this.options.fontFamily;\n    }\n\n    render(image) {\n        super.render(image);\n\n        this.clearCanvas();\n\n        const renderer = image.meta.colored\n            ? colorRenderer(this.ctx, this.options)\n            : monoRenderer(this.ctx, this.options);\n\n        renderer(image);\n\n        return this.el;\n    }\n\n    clearCanvas() {\n        this.ctx.clearRect(0, 0, this.el.width, this.el.height);\n    }\n}\n\nfunction colorRenderer(ctx, options) {\n    return ({ data, width }) => {\n        const { charWidth, lineHeight } = options;\n        let x;\n        let y;\n        let color;\n\n        for(var i = 0; i < data.length; ++i) {\n            x = i % width;\n            y = ~~(i / width);\n            color = data[i];\n\n            ctx.fillStyle = `rgb(${ color.r }, ${ color.g }, ${ color.b })`;\n            ctx.fillText(data[i].char, x * charWidth, y * lineHeight);\n        }\n    };\n}\n\nfunction monoRenderer(ctx, options) {\n    return ({ data, width }) => {\n        const lineHeight = options.lineHeight;\n        let y;\n        let line = \"\";\n\n        ctx.fillStyle = options.color;\n\n        for (let i = 0, length = data.length; i < length; i += width) {\n            y = ~~(i / width);\n            line = \"\";\n\n            for (let j = i; j < i + width; j++) {\n                line += data[j].char;\n            }\n\n            ctx.fillText(line, 0, y * lineHeight);\n        }\n    };\n}","import BaseRenderer from \"./BaseRenderer\";\n\nexport { ASCII_CHARSET, SIMPLE_CHARSET } from \"./BaseRenderer\";\n\nexport default function factory(options) {\n    const renderer = new HTMLRenderer(options);\n\n    return data => renderer.render(data);\n}\n\nexport class HTMLRenderer extends BaseRenderer {\n\n    constructor(options) {\n        super(Object.assign({}, {\n            tagName: \"pre\",\n            fontSize: 7,\n            background: \"#fff\",\n            color: \"#000\"\n        }, options));\n\n        this.el = this.options.el || document.createElement(this.options.tagName);\n        this.el.style.fontSize = this.options.fontSize + \"px\";\n        this.el.style.fontFamily = this.options.fontFamily;\n        this.el.style.backgroundColor = this.options.background;\n    }\n\n    render(image) {\n        super.render(image);\n\n        if (!image.meta.colored) {\n            this.el.style.color = this.options.color;\n        }\n\n        const renderer = image.meta.colored\n            ? colorRenderer(this.el)\n            : monoRenderer(this.el);\n\n        return renderer(image);\n    }\n}\n\nfunction colorRenderer(el) {\n    const wrapInColor = ({ char, r, g, b }) => (\n        `<span style=\"color: rgb(${ r }, ${ g }, ${ b })\">${ char }</span>`\n    );\n\n    const toString = stringRenderer(wrapInColor);\n\n    return image => {\n        el.innerHTML = toString(image);\n        return el;\n    };\n}\n\nfunction monoRenderer(el) {\n    const toString = stringRenderer(({ char }) => char);\n\n    return image => {\n        el.textContent = toString(image);\n        return el;\n    };\n}\n\nfunction stringRenderer(renderPixel) {\n    return ({ width, data }) => {\n        let str = \"\";\n        let w = width;\n\n        for (let i = 0, length = data.length; i < length; i++, w--) {\n            if (w === 0) {\n                str += \"\\n\";\n                w = width;\n            }\n\n            str += renderPixel(data[i]);\n        }\n\n        return str;\n    };\n}","export function mapRange(x, inStart, inEnd, outStart, outEnd) {\n    return outStart + ((outEnd - outStart) / (inEnd - inStart)) * (x - inStart);\n}\n\nexport function getRGB(idata, x, y) {\n    const offset = y * (idata.width << 2) + (x << 2);\n\n    return {\n        r: idata.data[offset],\n        g: idata.data[offset + 1],\n        b: idata.data[offset + 2]\n    };\n}\n\nexport function trunc(val) {\n    if (val > 255) {\n        return 255;\n    } else if (val < 0) {\n        return 0;\n    } else {\n        return val;\n    }\n}\n\nexport function range(start, end) {\n    return Array.from(new Array(end - start + 1).keys()).map(i => i + start);\n}\nexport function clampByte(v) {\n    if (v > 255) {\n        return 255;\n    } else if (v < 0) {\n        return 0;\n    }\n    return v;\n}","\"use strict\";\nvar root_1 = require('./util/root');\nvar toSubscriber_1 = require('./util/toSubscriber');\nvar observable_1 = require('./symbol/observable');\n/**\n * A representation of any set of values over any amount of time. This is the most basic building block\n * of RxJS.\n *\n * @class Observable<T>\n */\nvar Observable = (function () {\n    /**\n     * @constructor\n     * @param {Function} subscribe the function that is called when the Observable is\n     * initially subscribed to. This function is given a Subscriber, to which new values\n     * can be `next`ed, or an `error` method can be called to raise an error, or\n     * `complete` can be called to notify of a successful completion.\n     */\n    function Observable(subscribe) {\n        this._isScalar = false;\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    /**\n     * Creates a new Observable, with this Observable as the source, and the passed\n     * operator defined as the new observable's operator.\n     * @method lift\n     * @param {Operator} operator the operator defining the operation to take on the observable\n     * @return {Observable} a new observable with the Operator applied\n     */\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    /**\n     * Invokes an execution of an Observable and registers Observer handlers for notifications it will emit.\n     *\n     * <span class=\"informal\">Use it when you have all these Observables, but still nothing is happening.</span>\n     *\n     * `subscribe` is not a regular operator, but a method that calls Observable's internal `subscribe` function. It\n     * might be for example a function that you passed to a {@link create} static factory, but most of the time it is\n     * a library implementation, which defines what and when will be emitted by an Observable. This means that calling\n     * `subscribe` is actually the moment when Observable starts its work, not when it is created, as it is often\n     * thought.\n     *\n     * Apart from starting the execution of an Observable, this method allows you to listen for values\n     * that an Observable emits, as well as for when it completes or errors. You can achieve this in two\n     * following ways.\n     *\n     * The first way is creating an object that implements {@link Observer} interface. It should have methods\n     * defined by that interface, but note that it should be just a regular JavaScript object, which you can create\n     * yourself in any way you want (ES6 class, classic function constructor, object literal etc.). In particular do\n     * not attempt to use any RxJS implementation details to create Observers - you don't need them. Remember also\n     * that your object does not have to implement all methods. If you find yourself creating a method that doesn't\n     * do anything, you can simply omit it. Note however, that if `error` method is not provided, all errors will\n     * be left uncaught.\n     *\n     * The second way is to give up on Observer object altogether and simply provide callback functions in place of its methods.\n     * This means you can provide three functions as arguments to `subscribe`, where first function is equivalent\n     * of a `next` method, second of an `error` method and third of a `complete` method. Just as in case of Observer,\n     * if you do not need to listen for something, you can omit a function, preferably by passing `undefined` or `null`,\n     * since `subscribe` recognizes these functions by where they were placed in function call. When it comes\n     * to `error` function, just as before, if not provided, errors emitted by an Observable will be thrown.\n     *\n     * Whatever style of calling `subscribe` you use, in both cases it returns a Subscription object.\n     * This object allows you to call `unsubscribe` on it, which in turn will stop work that an Observable does and will clean\n     * up all resources that an Observable used. Note that cancelling a subscription will not call `complete` callback\n     * provided to `subscribe` function, which is reserved for a regular completion signal that comes from an Observable.\n     *\n     * Remember that callbacks provided to `subscribe` are not guaranteed to be called asynchronously.\n     * It is an Observable itself that decides when these functions will be called. For example {@link of}\n     * by default emits all its values synchronously. Always check documentation for how given Observable\n     * will behave when subscribed and if its default behavior can be modified with a {@link Scheduler}.\n     *\n     * @example <caption>Subscribe with an Observer</caption>\n     * const sumObserver = {\n     *   sum: 0,\n     *   next(value) {\n     *     console.log('Adding: ' + value);\n     *     this.sum = this.sum + value;\n     *   },\n     *   error() { // We actually could just remove this method,\n     *   },        // since we do not really care about errors right now.\n     *   complete() {\n     *     console.log('Sum equals: ' + this.sum);\n     *   }\n     * };\n     *\n     * Rx.Observable.of(1, 2, 3) // Synchronously emits 1, 2, 3 and then completes.\n     * .subscribe(sumObserver);\n     *\n     * // Logs:\n     * // \"Adding: 1\"\n     * // \"Adding: 2\"\n     * // \"Adding: 3\"\n     * // \"Sum equals: 6\"\n     *\n     *\n     * @example <caption>Subscribe with functions</caption>\n     * let sum = 0;\n     *\n     * Rx.Observable.of(1, 2, 3)\n     * .subscribe(\n     *   function(value) {\n     *     console.log('Adding: ' + value);\n     *     sum = sum + value;\n     *   },\n     *   undefined,\n     *   function() {\n     *     console.log('Sum equals: ' + sum);\n     *   }\n     * );\n     *\n     * // Logs:\n     * // \"Adding: 1\"\n     * // \"Adding: 2\"\n     * // \"Adding: 3\"\n     * // \"Sum equals: 6\"\n     *\n     *\n     * @example <caption>Cancel a subscription</caption>\n     * const subscription = Rx.Observable.interval(1000).subscribe(\n     *   num => console.log(num),\n     *   undefined,\n     *   () => console.log('completed!') // Will not be called, even\n     * );                                // when cancelling subscription\n     *\n     *\n     * setTimeout(() => {\n     *   subscription.unsubscribe();\n     *   console.log('unsubscribed!');\n     * }, 2500);\n     *\n     * // Logs:\n     * // 0 after 1s\n     * // 1 after 2s\n     * // \"unsubscribed!\" after 2.5s\n     *\n     *\n     * @param {Observer|Function} observerOrNext (optional) Either an observer with methods to be called,\n     *  or the first of three possible handlers, which is the handler for each value emitted from the subscribed\n     *  Observable.\n     * @param {Function} error (optional) A handler for a terminal event resulting from an error. If no error handler is provided,\n     *  the error will be thrown as unhandled.\n     * @param {Function} complete (optional) A handler for a terminal event resulting from successful completion.\n     * @return {ISubscription} a subscription reference to the registered handlers\n     * @method subscribe\n     */\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var operator = this.operator;\n        var sink = toSubscriber_1.toSubscriber(observerOrNext, error, complete);\n        if (operator) {\n            operator.call(sink, this.source);\n        }\n        else {\n            sink.add(this.source ? this._subscribe(sink) : this._trySubscribe(sink));\n        }\n        if (sink.syncErrorThrowable) {\n            sink.syncErrorThrowable = false;\n            if (sink.syncErrorThrown) {\n                throw sink.syncErrorValue;\n            }\n        }\n        return sink;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            sink.syncErrorThrown = true;\n            sink.syncErrorValue = err;\n            sink.error(err);\n        }\n    };\n    /**\n     * @method forEach\n     * @param {Function} next a handler for each value emitted by the observable\n     * @param {PromiseConstructor} [PromiseCtor] a constructor function used to instantiate the Promise\n     * @return {Promise} a promise that either resolves on observable completion or\n     *  rejects with the handled error\n     */\n    Observable.prototype.forEach = function (next, PromiseCtor) {\n        var _this = this;\n        if (!PromiseCtor) {\n            if (root_1.root.Rx && root_1.root.Rx.config && root_1.root.Rx.config.Promise) {\n                PromiseCtor = root_1.root.Rx.config.Promise;\n            }\n            else if (root_1.root.Promise) {\n                PromiseCtor = root_1.root.Promise;\n            }\n        }\n        if (!PromiseCtor) {\n            throw new Error('no Promise impl found');\n        }\n        return new PromiseCtor(function (resolve, reject) {\n            // Must be declared in a separate statement to avoid a RefernceError when\n            // accessing subscription below in the closure due to Temporal Dead Zone.\n            var subscription;\n            subscription = _this.subscribe(function (value) {\n                if (subscription) {\n                    // if there is a subscription, then we can surmise\n                    // the next handling is asynchronous. Any errors thrown\n                    // need to be rejected explicitly and unsubscribe must be\n                    // called manually\n                    try {\n                        next(value);\n                    }\n                    catch (err) {\n                        reject(err);\n                        subscription.unsubscribe();\n                    }\n                }\n                else {\n                    // if there is NO subscription, then we're getting a nexted\n                    // value synchronously during subscription. We can just call it.\n                    // If it errors, Observable's `subscribe` will ensure the\n                    // unsubscription logic is called, then synchronously rethrow the error.\n                    // After that, Promise will trap the error and send it\n                    // down the rejection path.\n                    next(value);\n                }\n            }, reject, resolve);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        return this.source.subscribe(subscriber);\n    };\n    /**\n     * An interop point defined by the es7-observable spec https://github.com/zenparsing/es-observable\n     * @method Symbol.observable\n     * @return {Observable} this instance of the observable\n     */\n    Observable.prototype[observable_1.observable] = function () {\n        return this;\n    };\n    // HACK: Since TypeScript inherits static properties too, we have to\n    // fight against TypeScript here so Subject can have a different static create signature\n    /**\n     * Creates a new cold Observable by calling the Observable constructor\n     * @static true\n     * @owner Observable\n     * @method create\n     * @param {Function} subscribe? the subscriber function to be passed to the Observable constructor\n     * @return {Observable} a new cold observable\n     */\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexports.Observable = Observable;\n//# sourceMappingURL=Observable.js.map","\"use strict\";\nexports.empty = {\n    closed: true,\n    next: function (value) { },\n    error: function (err) { throw err; },\n    complete: function () { }\n};\n//# sourceMappingURL=Observer.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar isFunction_1 = require('./util/isFunction');\nvar Subscription_1 = require('./Subscription');\nvar Observer_1 = require('./Observer');\nvar rxSubscriber_1 = require('./symbol/rxSubscriber');\n/**\n * Implements the {@link Observer} interface and extends the\n * {@link Subscription} class. While the {@link Observer} is the public API for\n * consuming the values of an {@link Observable}, all Observers get converted to\n * a Subscriber, in order to provide Subscription-like capabilities such as\n * `unsubscribe`. Subscriber is a common type in RxJS, and crucial for\n * implementing operators, but it is rarely used as a public API.\n *\n * @class Subscriber<T>\n */\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    /**\n     * @param {Observer|function(value: T): void} [destinationOrNext] A partially\n     * defined Observer or a `next` callback function.\n     * @param {function(e: ?any): void} [error] The `error` callback of an\n     * Observer.\n     * @param {function(): void} [complete] The `complete` callback of an\n     * Observer.\n     */\n    function Subscriber(destinationOrNext, error, complete) {\n        _super.call(this);\n        this.syncErrorValue = null;\n        this.syncErrorThrown = false;\n        this.syncErrorThrowable = false;\n        this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                this.destination = Observer_1.empty;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    this.destination = Observer_1.empty;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    if (destinationOrNext instanceof Subscriber) {\n                        this.destination = destinationOrNext;\n                        this.destination.add(this);\n                    }\n                    else {\n                        this.syncErrorThrowable = true;\n                        this.destination = new SafeSubscriber(this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                this.syncErrorThrowable = true;\n                this.destination = new SafeSubscriber(this, destinationOrNext, error, complete);\n                break;\n        }\n    }\n    Subscriber.prototype[rxSubscriber_1.rxSubscriber] = function () { return this; };\n    /**\n     * A static factory for a Subscriber, given a (potentially partial) definition\n     * of an Observer.\n     * @param {function(x: ?T): void} [next] The `next` callback of an Observer.\n     * @param {function(e: ?any): void} [error] The `error` callback of an\n     * Observer.\n     * @param {function(): void} [complete] The `complete` callback of an\n     * Observer.\n     * @return {Subscriber<T>} A Subscriber wrapping the (partially defined)\n     * Observer represented by the given arguments.\n     */\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    /**\n     * The {@link Observer} callback to receive notifications of type `next` from\n     * the Observable, with a value. The Observable may call this method 0 or more\n     * times.\n     * @param {T} [value] The `next` value.\n     * @return {void}\n     */\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    /**\n     * The {@link Observer} callback to receive notifications of type `error` from\n     * the Observable, with an attached {@link Error}. Notifies the Observer that\n     * the Observable has experienced an error condition.\n     * @param {any} [err] The `error` exception.\n     * @return {void}\n     */\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    /**\n     * The {@link Observer} callback to receive a valueless notification of type\n     * `complete` from the Observable. Notifies the Observer that the Observable\n     * has finished sending push-based notifications.\n     * @return {void}\n     */\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\n        var _a = this, _parent = _a._parent, _parents = _a._parents;\n        this._parent = null;\n        this._parents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parent = _parent;\n        this._parents = _parents;\n        return this;\n    };\n    return Subscriber;\n}(Subscription_1.Subscription));\nexports.Subscriber = Subscriber;\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n        _super.call(this);\n        this._parentSubscriber = _parentSubscriber;\n        var next;\n        var context = this;\n        if (isFunction_1.isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== Observer_1.empty) {\n                context = Object.create(observerOrNext);\n                if (isFunction_1.isFunction(context.unsubscribe)) {\n                    this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = this.unsubscribe.bind(this);\n            }\n        }\n        this._context = context;\n        this._next = next;\n        this._error = error;\n        this._complete = complete;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (!_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._error) {\n                if (!_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                throw err;\n            }\n            else {\n                _parentSubscriber.syncErrorValue = err;\n                _parentSubscriber.syncErrorThrown = true;\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        var _this = this;\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._complete) {\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\n                if (!_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            throw err;\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            parent.syncErrorValue = err;\n            parent.syncErrorThrown = true;\n            return true;\n        }\n        return false;\n    };\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parentSubscriber = this._parentSubscriber;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\n//# sourceMappingURL=Subscriber.js.map","\"use strict\";\nvar isArray_1 = require('./util/isArray');\nvar isObject_1 = require('./util/isObject');\nvar isFunction_1 = require('./util/isFunction');\nvar tryCatch_1 = require('./util/tryCatch');\nvar errorObject_1 = require('./util/errorObject');\nvar UnsubscriptionError_1 = require('./util/UnsubscriptionError');\n/**\n * Represents a disposable resource, such as the execution of an Observable. A\n * Subscription has one important method, `unsubscribe`, that takes no argument\n * and just disposes the resource held by the subscription.\n *\n * Additionally, subscriptions may be grouped together through the `add()`\n * method, which will attach a child Subscription to the current Subscription.\n * When a Subscription is unsubscribed, all its children (and its grandchildren)\n * will be unsubscribed as well.\n *\n * @class Subscription\n */\nvar Subscription = (function () {\n    /**\n     * @param {function(): void} [unsubscribe] A function describing how to\n     * perform the disposal of resources when the `unsubscribe` method is called.\n     */\n    function Subscription(unsubscribe) {\n        /**\n         * A flag to indicate whether this Subscription has already been unsubscribed.\n         * @type {boolean}\n         */\n        this.closed = false;\n        this._parent = null;\n        this._parents = null;\n        this._subscriptions = null;\n        if (unsubscribe) {\n            this._unsubscribe = unsubscribe;\n        }\n    }\n    /**\n     * Disposes the resources held by the subscription. May, for instance, cancel\n     * an ongoing Observable execution or cancel any other type of work that\n     * started when the Subscription was created.\n     * @return {void}\n     */\n    Subscription.prototype.unsubscribe = function () {\n        var hasErrors = false;\n        var errors;\n        if (this.closed) {\n            return;\n        }\n        var _a = this, _parent = _a._parent, _parents = _a._parents, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n        this.closed = true;\n        this._parent = null;\n        this._parents = null;\n        // null out _subscriptions first so any child subscriptions that attempt\n        // to remove themselves from this subscription will noop\n        this._subscriptions = null;\n        var index = -1;\n        var len = _parents ? _parents.length : 0;\n        // if this._parent is null, then so is this._parents, and we\n        // don't have to remove ourselves from any parent subscriptions.\n        while (_parent) {\n            _parent.remove(this);\n            // if this._parents is null or index >= len,\n            // then _parent is set to null, and the loop exits\n            _parent = ++index < len && _parents[index] || null;\n        }\n        if (isFunction_1.isFunction(_unsubscribe)) {\n            var trial = tryCatch_1.tryCatch(_unsubscribe).call(this);\n            if (trial === errorObject_1.errorObject) {\n                hasErrors = true;\n                errors = errors || (errorObject_1.errorObject.e instanceof UnsubscriptionError_1.UnsubscriptionError ?\n                    flattenUnsubscriptionErrors(errorObject_1.errorObject.e.errors) : [errorObject_1.errorObject.e]);\n            }\n        }\n        if (isArray_1.isArray(_subscriptions)) {\n            index = -1;\n            len = _subscriptions.length;\n            while (++index < len) {\n                var sub = _subscriptions[index];\n                if (isObject_1.isObject(sub)) {\n                    var trial = tryCatch_1.tryCatch(sub.unsubscribe).call(sub);\n                    if (trial === errorObject_1.errorObject) {\n                        hasErrors = true;\n                        errors = errors || [];\n                        var err = errorObject_1.errorObject.e;\n                        if (err instanceof UnsubscriptionError_1.UnsubscriptionError) {\n                            errors = errors.concat(flattenUnsubscriptionErrors(err.errors));\n                        }\n                        else {\n                            errors.push(err);\n                        }\n                    }\n                }\n            }\n        }\n        if (hasErrors) {\n            throw new UnsubscriptionError_1.UnsubscriptionError(errors);\n        }\n    };\n    /**\n     * Adds a tear down to be called during the unsubscribe() of this\n     * Subscription.\n     *\n     * If the tear down being added is a subscription that is already\n     * unsubscribed, is the same reference `add` is being called on, or is\n     * `Subscription.EMPTY`, it will not be added.\n     *\n     * If this subscription is already in an `closed` state, the passed\n     * tear down logic will be executed immediately.\n     *\n     * @param {TeardownLogic} teardown The additional logic to execute on\n     * teardown.\n     * @return {Subscription} Returns the Subscription used or created to be\n     * added to the inner subscriptions list. This Subscription can be used with\n     * `remove()` to remove the passed teardown logic from the inner subscriptions\n     * list.\n     */\n    Subscription.prototype.add = function (teardown) {\n        if (!teardown || (teardown === Subscription.EMPTY)) {\n            return Subscription.EMPTY;\n        }\n        if (teardown === this) {\n            return this;\n        }\n        var subscription = teardown;\n        switch (typeof teardown) {\n            case 'function':\n                subscription = new Subscription(teardown);\n            case 'object':\n                if (subscription.closed || typeof subscription.unsubscribe !== 'function') {\n                    return subscription;\n                }\n                else if (this.closed) {\n                    subscription.unsubscribe();\n                    return subscription;\n                }\n                else if (typeof subscription._addParent !== 'function' /* quack quack */) {\n                    var tmp = subscription;\n                    subscription = new Subscription();\n                    subscription._subscriptions = [tmp];\n                }\n                break;\n            default:\n                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n        }\n        var subscriptions = this._subscriptions || (this._subscriptions = []);\n        subscriptions.push(subscription);\n        subscription._addParent(this);\n        return subscription;\n    };\n    /**\n     * Removes a Subscription from the internal list of subscriptions that will\n     * unsubscribe during the unsubscribe process of this Subscription.\n     * @param {Subscription} subscription The subscription to remove.\n     * @return {void}\n     */\n    Subscription.prototype.remove = function (subscription) {\n        var subscriptions = this._subscriptions;\n        if (subscriptions) {\n            var subscriptionIndex = subscriptions.indexOf(subscription);\n            if (subscriptionIndex !== -1) {\n                subscriptions.splice(subscriptionIndex, 1);\n            }\n        }\n    };\n    Subscription.prototype._addParent = function (parent) {\n        var _a = this, _parent = _a._parent, _parents = _a._parents;\n        if (!_parent || _parent === parent) {\n            // If we don't have a parent, or the new parent is the same as the\n            // current parent, then set this._parent to the new parent.\n            this._parent = parent;\n        }\n        else if (!_parents) {\n            // If there's already one parent, but not multiple, allocate an Array to\n            // store the rest of the parent Subscriptions.\n            this._parents = [parent];\n        }\n        else if (_parents.indexOf(parent) === -1) {\n            // Only add the new parent to the _parents list if it's not already there.\n            _parents.push(parent);\n        }\n    };\n    Subscription.EMPTY = (function (empty) {\n        empty.closed = true;\n        return empty;\n    }(new Subscription()));\n    return Subscription;\n}());\nexports.Subscription = Subscription;\nfunction flattenUnsubscriptionErrors(errors) {\n    return errors.reduce(function (errs, err) { return errs.concat((err instanceof UnsubscriptionError_1.UnsubscriptionError) ? err.errors : err); }, []);\n}\n//# sourceMappingURL=Subscription.js.map","\"use strict\";\nvar Observable_1 = require('../../Observable');\nvar do_1 = require('../../operator/do');\nObservable_1.Observable.prototype.do = do_1._do;\nObservable_1.Observable.prototype._do = do_1._do;\n//# sourceMappingURL=do.js.map","\"use strict\";\nvar Observable_1 = require('../../Observable');\nvar map_1 = require('../../operator/map');\nObservable_1.Observable.prototype.map = map_1.map;\n//# sourceMappingURL=map.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Subscriber_1 = require('../Subscriber');\n/* tslint:enable:max-line-length */\n/**\n * Perform a side effect for every emission on the source Observable, but return\n * an Observable that is identical to the source.\n *\n * <span class=\"informal\">Intercepts each emission on the source and runs a\n * function, but returns an output which is identical to the source as long as errors don't occur.</span>\n *\n * <img src=\"./img/do.png\" width=\"100%\">\n *\n * Returns a mirrored Observable of the source Observable, but modified so that\n * the provided Observer is called to perform a side effect for every value,\n * error, and completion emitted by the source. Any errors that are thrown in\n * the aforementioned Observer or handlers are safely sent down the error path\n * of the output Observable.\n *\n * This operator is useful for debugging your Observables for the correct values\n * or performing other side effects.\n *\n * Note: this is different to a `subscribe` on the Observable. If the Observable\n * returned by `do` is not subscribed, the side effects specified by the\n * Observer will never happen. `do` therefore simply spies on existing\n * execution, it does not trigger an execution to happen like `subscribe` does.\n *\n * @example <caption>Map every click to the clientX position of that click, while also logging the click event</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var positions = clicks\n *   .do(ev => console.log(ev))\n *   .map(ev => ev.clientX);\n * positions.subscribe(x => console.log(x));\n *\n * @see {@link map}\n * @see {@link subscribe}\n *\n * @param {Observer|function} [nextOrObserver] A normal Observer object or a\n * callback for `next`.\n * @param {function} [error] Callback for errors in the source.\n * @param {function} [complete] Callback for the completion of the source.\n * @return {Observable} An Observable identical to the source, but runs the\n * specified Observer or callback(s) for each item.\n * @method do\n * @name do\n * @owner Observable\n */\nfunction _do(nextOrObserver, error, complete) {\n    return this.lift(new DoOperator(nextOrObserver, error, complete));\n}\nexports._do = _do;\nvar DoOperator = (function () {\n    function DoOperator(nextOrObserver, error, complete) {\n        this.nextOrObserver = nextOrObserver;\n        this.error = error;\n        this.complete = complete;\n    }\n    DoOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new DoSubscriber(subscriber, this.nextOrObserver, this.error, this.complete));\n    };\n    return DoOperator;\n}());\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar DoSubscriber = (function (_super) {\n    __extends(DoSubscriber, _super);\n    function DoSubscriber(destination, nextOrObserver, error, complete) {\n        _super.call(this, destination);\n        var safeSubscriber = new Subscriber_1.Subscriber(nextOrObserver, error, complete);\n        safeSubscriber.syncErrorThrowable = true;\n        this.add(safeSubscriber);\n        this.safeSubscriber = safeSubscriber;\n    }\n    DoSubscriber.prototype._next = function (value) {\n        var safeSubscriber = this.safeSubscriber;\n        safeSubscriber.next(value);\n        if (safeSubscriber.syncErrorThrown) {\n            this.destination.error(safeSubscriber.syncErrorValue);\n        }\n        else {\n            this.destination.next(value);\n        }\n    };\n    DoSubscriber.prototype._error = function (err) {\n        var safeSubscriber = this.safeSubscriber;\n        safeSubscriber.error(err);\n        if (safeSubscriber.syncErrorThrown) {\n            this.destination.error(safeSubscriber.syncErrorValue);\n        }\n        else {\n            this.destination.error(err);\n        }\n    };\n    DoSubscriber.prototype._complete = function () {\n        var safeSubscriber = this.safeSubscriber;\n        safeSubscriber.complete();\n        if (safeSubscriber.syncErrorThrown) {\n            this.destination.error(safeSubscriber.syncErrorValue);\n        }\n        else {\n            this.destination.complete();\n        }\n    };\n    return DoSubscriber;\n}(Subscriber_1.Subscriber));\n//# sourceMappingURL=do.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Subscriber_1 = require('../Subscriber');\n/**\n * Applies a given `project` function to each value emitted by the source\n * Observable, and emits the resulting values as an Observable.\n *\n * <span class=\"informal\">Like [Array.prototype.map()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map),\n * it passes each source value through a transformation function to get\n * corresponding output values.</span>\n *\n * <img src=\"./img/map.png\" width=\"100%\">\n *\n * Similar to the well known `Array.prototype.map` function, this operator\n * applies a projection to each value and emits that projection in the output\n * Observable.\n *\n * @example <caption>Map every click to the clientX position of that click</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var positions = clicks.map(ev => ev.clientX);\n * positions.subscribe(x => console.log(x));\n *\n * @see {@link mapTo}\n * @see {@link pluck}\n *\n * @param {function(value: T, index: number): R} project The function to apply\n * to each `value` emitted by the source Observable. The `index` parameter is\n * the number `i` for the i-th emission that has happened since the\n * subscription, starting from the number `0`.\n * @param {any} [thisArg] An optional argument to define what `this` is in the\n * `project` function.\n * @return {Observable<R>} An Observable that emits the values from the source\n * Observable transformed by the given `project` function.\n * @method map\n * @owner Observable\n */\nfunction map(project, thisArg) {\n    if (typeof project !== 'function') {\n        throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');\n    }\n    return this.lift(new MapOperator(project, thisArg));\n}\nexports.map = map;\nvar MapOperator = (function () {\n    function MapOperator(project, thisArg) {\n        this.project = project;\n        this.thisArg = thisArg;\n    }\n    MapOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new MapSubscriber(subscriber, this.project, this.thisArg));\n    };\n    return MapOperator;\n}());\nexports.MapOperator = MapOperator;\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar MapSubscriber = (function (_super) {\n    __extends(MapSubscriber, _super);\n    function MapSubscriber(destination, project, thisArg) {\n        _super.call(this, destination);\n        this.project = project;\n        this.count = 0;\n        this.thisArg = thisArg || this;\n    }\n    // NOTE: This looks unoptimized, but it's actually purposefully NOT\n    // using try/catch optimizations.\n    MapSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.project.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return MapSubscriber;\n}(Subscriber_1.Subscriber));\n//# sourceMappingURL=map.js.map","\"use strict\";\nvar root_1 = require('../util/root');\nfunction getSymbolObservable(context) {\n    var $$observable;\n    var Symbol = context.Symbol;\n    if (typeof Symbol === 'function') {\n        if (Symbol.observable) {\n            $$observable = Symbol.observable;\n        }\n        else {\n            $$observable = Symbol('observable');\n            Symbol.observable = $$observable;\n        }\n    }\n    else {\n        $$observable = '@@observable';\n    }\n    return $$observable;\n}\nexports.getSymbolObservable = getSymbolObservable;\nexports.observable = getSymbolObservable(root_1.root);\n/**\n * @deprecated use observable instead\n */\nexports.$$observable = exports.observable;\n//# sourceMappingURL=observable.js.map","\"use strict\";\nvar root_1 = require('../util/root');\nvar Symbol = root_1.root.Symbol;\nexports.rxSubscriber = (typeof Symbol === 'function' && typeof Symbol.for === 'function') ?\n    Symbol.for('rxSubscriber') : '@@rxSubscriber';\n/**\n * @deprecated use rxSubscriber instead\n */\nexports.$$rxSubscriber = exports.rxSubscriber;\n//# sourceMappingURL=rxSubscriber.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n/**\n * An error thrown when one or more errors have occurred during the\n * `unsubscribe` of a {@link Subscription}.\n */\nvar UnsubscriptionError = (function (_super) {\n    __extends(UnsubscriptionError, _super);\n    function UnsubscriptionError(errors) {\n        _super.call(this);\n        this.errors = errors;\n        var err = Error.call(this, errors ?\n            errors.length + \" errors occurred during unsubscription:\\n  \" + errors.map(function (err, i) { return ((i + 1) + \") \" + err.toString()); }).join('\\n  ') : '');\n        this.name = err.name = 'UnsubscriptionError';\n        this.stack = err.stack;\n        this.message = err.message;\n    }\n    return UnsubscriptionError;\n}(Error));\nexports.UnsubscriptionError = UnsubscriptionError;\n//# sourceMappingURL=UnsubscriptionError.js.map","\"use strict\";\n// typeof any so that it we don't have to cast when comparing a result to the error object\nexports.errorObject = { e: {} };\n//# sourceMappingURL=errorObject.js.map","\"use strict\";\nexports.isArray = Array.isArray || (function (x) { return x && typeof x.length === 'number'; });\n//# sourceMappingURL=isArray.js.map","\"use strict\";\nfunction isFunction(x) {\n    return typeof x === 'function';\n}\nexports.isFunction = isFunction;\n//# sourceMappingURL=isFunction.js.map","\"use strict\";\nfunction isObject(x) {\n    return x != null && typeof x === 'object';\n}\nexports.isObject = isObject;\n//# sourceMappingURL=isObject.js.map","\"use strict\";\n// CommonJS / Node have global context exposed as \"global\" variable.\n// We don't want to include the whole node.d.ts this this compilation unit so we'll just fake\n// the global \"global\" var for now.\nvar __window = typeof window !== 'undefined' && window;\nvar __self = typeof self !== 'undefined' && typeof WorkerGlobalScope !== 'undefined' &&\n    self instanceof WorkerGlobalScope && self;\nvar __global = typeof global !== 'undefined' && global;\nvar _root = __window || __global || __self;\nexports.root = _root;\n// Workaround Closure Compiler restriction: The body of a goog.module cannot use throw.\n// This is needed when used with angular/tsickle which inserts a goog.module statement.\n// Wrap in IIFE\n(function () {\n    if (!_root) {\n        throw new Error('RxJS could not find any global context (window, self, global)');\n    }\n})();\n//# sourceMappingURL=root.js.map","\"use strict\";\nvar Subscriber_1 = require('../Subscriber');\nvar rxSubscriber_1 = require('../symbol/rxSubscriber');\nvar Observer_1 = require('../Observer');\nfunction toSubscriber(nextOrObserver, error, complete) {\n    if (nextOrObserver) {\n        if (nextOrObserver instanceof Subscriber_1.Subscriber) {\n            return nextOrObserver;\n        }\n        if (nextOrObserver[rxSubscriber_1.rxSubscriber]) {\n            return nextOrObserver[rxSubscriber_1.rxSubscriber]();\n        }\n    }\n    if (!nextOrObserver && !error && !complete) {\n        return new Subscriber_1.Subscriber(Observer_1.empty);\n    }\n    return new Subscriber_1.Subscriber(nextOrObserver, error, complete);\n}\nexports.toSubscriber = toSubscriber;\n//# sourceMappingURL=toSubscriber.js.map","\"use strict\";\nvar errorObject_1 = require('./errorObject');\nvar tryCatchTarget;\nfunction tryCatcher() {\n    try {\n        return tryCatchTarget.apply(this, arguments);\n    }\n    catch (e) {\n        errorObject_1.errorObject.e = e;\n        return errorObject_1.errorObject;\n    }\n}\nfunction tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\nexports.tryCatch = tryCatch;\n;\n//# sourceMappingURL=tryCatch.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","import ImageReader from \"./readers/ImageReader\";\nimport VideoReader from \"./readers/VideoReader\";\nimport ImageDataReader from \"./readers/ImageDataReader\";\n\nimport linear from \"./filters/linear\";\nimport brightness from \"./filters/brightness\";\nimport contrast from \"./filters/contrast\";\nimport inverse from \"./filters/inverse\";\nimport desaturate from \"./filters/desaturate\";\n\nimport html from \"./renderers/HTMLRenderer\";\nimport canvas from \"./renderers/CanvasRenderer\";\nimport { SIMPLE_CHARSET, ASCII_CHARSET } from \"./renderers/BaseRenderer\";\n\nimport aa from \"./aa\";\n\nexport { aa };\n\nexport const read = {\n    image: {\n        fromHTMLImage: ImageReader.fromHTMLImage,\n        fromURL: ImageReader.fromURL\n    },\n\n    imageData: {\n        fromImageData: ImageDataReader.fromImageData,\n        fromCanvas: ImageDataReader.fromCanvas\n    },\n\n    video: {\n        fromVideoElement: VideoReader.fromVideoElement\n    }\n};\n\nexport const filter = {\n    linear,\n    brightness,\n    contrast,\n    inverse,\n    desaturate\n};\n\nexport const render = {\n    html,\n    canvas\n};\n\nexport const charset = {\n    SIMPLE_CHARSET,\n    ASCII_CHARSET\n};\n\nexport default {\n    aa,\n    read,\n    filter,\n    render,\n    charset\n};"],"names":["root","factory","exports","module","define","amd","self","options","image","aa","width","height","colored","bw","bh","minMono","maxMono","data","Array","k","i","j","color","analyzeColors","mono","a","b","aaImage","colorProcessor","meta","process","mapRange","x","y","avgColor","r","g","count","row","col","addc","getAt","div","getGrayscale","charset","table","length","min","max","char","brightness","calculateBrightness","map","sort","canvas","fontFamily","createCanvas","ctx","fillStyle","fillRect","textBaseline","textAlign","font","fillText","drawChar","idata","getContext","getImageData","data32","Uint32Array","buffer","pixel32","func","document","createElement","alpha","_result","AAImage","this","fn","forEach","pt","ImageData","Uint8ClampedArray","naturalWidth","naturalHeight","drawImage","fromImageData","mul","v","add","inverse","desaturate","clamp","clampByte","val","contrast","linearTransformation","processor","beta","AbstractReader","Observable","create","observer","onRead","onDispose","bind","ImageDataReader","next","complete","read","ImageReader","url","img","crossOrigin","onLoad","removeListeners","fromHTMLImageElement","onError","e","error","removeEventListener","addEventListener","src","fromURL","VideoReader","video","captureFrame","Object","assign","autoplay","_lastDisplayedTimestamp","framerate","console","log","playbackLoop","timestamp","paused","ended","requestAnimationFrame","code","message","reader","w","videoWidth","h","videoHeight","BaseRenderer","ASCII_CHARSET","fontmap","buildFont","matchChar","_cache","arg","processImage","pixel","monoValue","match","tuple","Math","abs","range","String","fromCharCode","SIMPLE_CHARSET","renderer","CanvasRenderer","render","fontSize","lineHeight","charWidth","background","el","style","backgroundColor","clearCanvas","line","monoRenderer","clearRect","HTMLRenderer","tagName","toString","stringRenderer","innerHTML","textContent","renderPixel","str","inStart","inEnd","outStart","outEnd","offset","start","end","from","keys","root_1","toSubscriber_1","observable_1","subscribe","_isScalar","_subscribe","prototype","lift","operator","observable","source","observerOrNext","sink","toSubscriber","call","_trySubscribe","syncErrorThrowable","syncErrorThrown","syncErrorValue","err","PromiseCtor","_this","Rx","config","Promise","Error","resolve","reject","subscription","value","unsubscribe","subscriber","empty","closed","__extends","d","p","hasOwnProperty","__","constructor","isFunction_1","Subscription_1","Observer_1","rxSubscriber_1","Subscriber","_super","destinationOrNext","isStopped","arguments","destination","SafeSubscriber","rxSubscriber","_next","_error","_complete","_unsubscribeAndRecycle","_parent","_parents","Subscription","_parentSubscriber","context","isFunction","_context","__tryOrSetError","__tryOrUnsub","wrappedComplete","parent","_unsubscribe","isArray_1","isObject_1","tryCatch_1","errorObject_1","UnsubscriptionError_1","_subscriptions","errors","hasErrors","_a","index","len","remove","tryCatch","errorObject","UnsubscriptionError","flattenUnsubscriptionErrors","isArray","sub","isObject","concat","push","teardown","EMPTY","_addParent","tmp","subscriptions","subscriptionIndex","indexOf","splice","reduce","errs","Observable_1","do_1","do","_do","map_1","Subscriber_1","nextOrObserver","DoOperator","DoSubscriber","safeSubscriber","project","thisArg","TypeError","MapOperator","MapSubscriber","result","getSymbolObservable","$$observable","Symbol","for","$$rxSubscriber","join","name","stack","__window","window","__self","WorkerGlobalScope","__global","_root","tryCatchTarget","tryCatcher","apply","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","globalThis","Function","fromHTMLImage","imageData","fromCanvas","fromVideoElement","filter","linear","html"],"sourceRoot":""}